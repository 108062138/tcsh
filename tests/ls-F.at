AT_BANNER([ls-F built-in command])

dnl
dnl	ls-F
dnl

dnl
dnl Note that the test groups don't test multiple columns
dnl because the terminal doesn't get setup by default with -c.
dnl

AT_SETUP([ls-F])
AT_KEYWORDS([commands])

AT_CHECK([create_ls_DIR])

dnl
dnl Disable CLICOLOR_FORCE, LSCOLORS, and LS_COLORS
dnl

unset CLICOLOR_FORCE
unset LSCOLORS
unset LS_COLORS


dnl
dnl ls-F with default behavior
dnl

AT_CHECK([tcsh -f -c 'cd DIR && ls-F'], [0], [dnl
dir/
exec*
file @&t@
ldir@
lexec@
lfile@
lldir@
llexec@
llfile@
llorphan@
llpipe@
lorphan@
lpipe@
pipe|
])


dnl
dnl listlinks.
dnl Changes from default:
dnl	ldir>
dnl	lldir>
dnl	llorphan&
dnl	lorphan&
dnl

AT_CHECK([tcsh -f -c 'set listlinks; cd DIR && ls-F'], [0], [dnl
dir/
exec*
file @&t@
ldir>
lexec@
lfile@
lldir>
llexec@
llfile@
llorphan&
llpipe@
lorphan&
lpipe@
pipe|
])


dnl
dnl listflags=x
dnl Note: no changes from default when in in 1 column mode
dnl

AT_CHECK([tcsh -f -c 'set listflags=x; cd DIR && ls-F'], [0], [dnl
dir/
exec*
file @&t@
ldir@
lexec@
lfile@
lldir@
llexec@
llfile@
llorphan@
llpipe@
lorphan@
lpipe@
pipe|
])


dnl
dnl listflags=A
dnl Changes from default:
dnl	.hidden
dnl

AT_CHECK([tcsh -f -c 'set listflags=A; cd DIR && ls-F'], [0], [dnl
.hidden @&t@
dir/
exec*
file @&t@
ldir@
lexec@
lfile@
lldir@
llexec@
llfile@
llorphan@
llpipe@
lorphan@
lpipe@
pipe|
])


dnl
dnl listflags=xa
dnl Changes from default:
dnl	../
dnl	./
dnl	.hidden
dnl

AT_CHECK([tcsh -f -c 'set listflags=xa; cd DIR && ls-F'], [0], [dnl
../
./
.hidden @&t@
dir/
exec*
file @&t@
ldir@
lexec@
lfile@
lldir@
llexec@
llfile@
llorphan@
llpipe@
lorphan@
lpipe@
pipe|
])

AT_CLEANUP()
